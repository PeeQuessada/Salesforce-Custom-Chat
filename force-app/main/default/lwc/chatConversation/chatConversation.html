<template>
  <div class="slds-box slds-m-right_x-small c-chat-height">
    <div class="slds-scrollable_y c-conversation-height">
      <template if:true={chat}>
        <h1 class="slds-m-bottom_x-small">{chat.Name}</h1>
      </template>
      <section role="log" class="slds-chat">
        <ul class="slds-chat-list">
          <template if:true={messages}>
            <template for:each={messages} for:item="message">
              <div key={message.Id}>
                <template if:true={message.Owner}>
                  <div class="slds-clearfix">
                    <div class="slds-float_right">
                      <li class="slds-chat-listitem slds-chat-listitem_inbound">
                        <div class="slds-clearfix">
                          <div class="slds-float_right">
                            <div class="slds-chat-message">
                              <div class="slds-chat-message__body">
                                <div
                                  class="slds-chat-message__text slds-chat-message__text_inbound c-owner-message"
                                >
                                  <span>{message.Message__c}</span>
                                </div>
                                <!-- <div
                                  class="slds-chat-message__meta"
                                  aria-label={message.CreatedDate}
                                >
                                  {message.CreatedDate}
                                </div> -->
                              </div>
                            </div>
                          </div>
                        </div>
                      </li>
                    </div>
                  </div>
                </template>
                <template if:false={message.Owner}>
                  <div class="slds-clearfix">
                    <div class="slds-float_left">
                      <li class="slds-chat-listitem slds-chat-listitem_inbound">
                        <div class="slds-clearfix">
                          <div class="slds-float_right">
                            <div class="slds-chat-message">
                              <div class="slds-chat-message__body">
                                <div
                                  class="slds-chat-message__text slds-chat-message__text_inbound"
                                >
                                  <span>{message.Message__c}</span>
                                </div>
                                <!-- <div
                                  class="slds-chat-message__meta"
                                  aria-label={message.CreatedDate}
                                >
                                  {message.CreatedDate}
                                </div> -->
                              </div>
                            </div>
                          </div>
                        </div>
                      </li>
                    </div>
                  </div>
                </template>
              </div>
            </template>
          </template>
        </ul>
      </section>
    </div>
    <div class="slds-m-top_x-small">
      <div class="slds-grid slds-gutters">
        <div class="slds-col slds-size_10-of-12">
          <div class="slds-form-element">
            <div
              class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right"
            >
              <input
                type="text"
                id="text-input-id-1"
                placeholder="Escreve uma mensagem"
                class="slds-input"
                data-text="message"
                value={value}
              />
            </div>
          </div>
        </div>
        <div class="slds-col slds-size_2-of-12">
          <lightning-button-icon
            icon-name="utility:send"
            variant="border-filled"
            alternative-text="Send"
            title="send"
            onclick={sendMessage}
          ></lightning-button-icon>
        </div>
      </div>
    </div>
  </div>
</template>
